using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Controller : MonoBehaviour 
{

    public Transform transform;
    public Rigidbody rigidbody;
    public HeadBob headBob;

    public float xSensitivity;
    public float ySensitivity;

    // Privates
    private Vector3 velocity;


    // Declare the keys that will be used to detect movement.
    private System.String xAxisInput;
    private System.String yAxisInput;
    private KeyCode forward;
    private KeyCode backward;
    private KeyCode left;
    private KeyCode right;

    Quaternion GetDeltaQuaternion(int axis)
    {
        float input;
        float rotation;
        Vector3 axis_vector;
        if(axis == 0)
        {
            input = Input.GetAxis(xAxisInput);
            rotation = input * xSensitivity * 360.0f; 
            axis_vector = Vector3.up;
        }
        else
        {
            input = Input.GetAxis(yAxisInput);
            rotation = input * ySensitivity * 360.0f; 
            axis_vector = Vector3.left;
        }
        return Quaternion.AngleAxis(rotation, axis_vector);
    }

    void Start () 
    {
        
        // Set the keys used for movment detection.
        xAxisInput = "Mouse X";
        yAxisInput = "Mouse Y";
        forward = KeyCode.W;
        backward = KeyCode.S;
        left = KeyCode.A;
        right = KeyCode.D;
    }
 
    void Update () 
    {
        float x_input = Input.GetAxis(xAxisInput);
        float y_rotation = x_input * xSensitivity * 360.0f;

        Debug.Log(y_rotation);
        
        Quaternion y_quat = Quaternion.AngleAxis(y_rotation, Vector3.up);
        Quaternion og_quat = transform.localRotation;
        transform.localRotation = og_quat * y_quat;

        headBob.UpdateContribution(0.0f);
        if(Input.GetKey(forward))
        {
            headBob.UpdateContribution(1.0f);
        }
        if(Input.GetKey(backward))
        {
            headBob.UpdateContribution(1.0f);
        }
        if(Input.GetKey(left))
        {
            headBob.UpdateContribution(1.0f);
        }
        if(Input.GetKey(right))
        {
            headBob.UpdateContribution(1.0f);
        }
    }
}
